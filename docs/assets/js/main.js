"use strict";const searchButtonEl=document.querySelector(".search__button"),searchInputEl=document.querySelector(".search__input"),searchResponseEl=document.querySelector(".results-section"),favoriteSectionEl=document.querySelector(".favorite-section");let search="",favorites=[];function favoriteCloseButton(e){const t=document.getElementById(`${e.currentTarget.id}`),s=favorites.findIndex(e=>e.id===t);favorites.splice(s-1,1),localStorage.setItem("favorites",JSON.stringify(favorites)),e.currentTarget.parentElement.remove()}if(localStorage.favorites){favorites=JSON.parse(localStorage.getItem("favorites"));for(const e of favorites){const t=document.createElement("li");t.classList.add("favorite");const s=document.createElement("h2"),r=document.createTextNode(e.name);s.appendChild(r);const i=document.createElement("img");i.setAttribute("style",`background-image: ${e.img}`),i.classList.add("results-section__image"),t.appendChild(s),t.appendChild(i),t.setAttribute("id",e.id),favoriteSectionEl.appendChild(t);const a=document.createElement("i");a.classList.add("fas"),a.classList.add("fa-times"),a.classList.add("favorite-erase"),t.appendChild(a),a.addEventListener("click",favoriteCloseButton)}}function cardClickFavoriteHandler(e){if(!1===e.currentTarget.classList.contains("results-section__card--selected")){e.currentTarget.classList.add("results-section__card--selected");const t=document.createElement("li");t.classList.add("favorite");const s=document.createElement("h2"),r=document.createTextNode(e.currentTarget.firstChild.innerHTML);s.appendChild(r);const i=document.createElement("img");i.setAttribute("style",`background-image: ${e.currentTarget.firstChild.nextElementSibling.style.backgroundImage}`),i.classList.add("results-section__image");const a=document.createElement("i");a.classList.add("fas"),a.classList.add("fa-times"),a.classList.add("favorite-erase"),t.appendChild(a),a.addEventListener("click",favoriteCloseButton),t.appendChild(s),t.appendChild(i),t.setAttribute("id",e.currentTarget.firstChild.id),favoriteSectionEl.appendChild(t);const n={id:e.currentTarget.firstChild.id,name:e.currentTarget.firstChild.innerHTML,img:e.currentTarget.firstChild.nextElementSibling.style.backgroundImage};favorites.push(n),localStorage.setItem("favorites",JSON.stringify(favorites))}else if(!0===e.currentTarget.classList.contains("results-section__card--selected")){e.currentTarget.classList.remove("results-section__card--selected");const t=document.getElementById(`${e.currentTarget.firstChild.id}`),s=favorites.findIndex(e=>e.id===t);favorites.splice(s-1,1),localStorage.setItem("favorites",JSON.stringify(favorites)),t.remove()}}function printSeriesTitle(e){const t=document.createElement("div");t.classList.add("results-section__card");const s=document.createElement("h2"),r=document.createTextNode(e.name);s.appendChild(r),s.setAttribute("id",`${e.id}`),t.appendChild(s),searchResponseEl.appendChild(t),printSeriesImage(t,e)}function printSeriesImage(e,t){const s=document.createElement("img");s.classList.add("results-section__image");null===t.image?s.setAttribute("style","background-image: url(https://via.placeholder.com/210x295/ffffff/666666/?text=TV)"):s.setAttribute("style",`background-image: url(${t.image.medium})`),e.appendChild(s),e.classList.add("results-section__card");const r=document.querySelectorAll(".results-section__card");for(const e of r)e.addEventListener("click",cardClickFavoriteHandler)}function searchSeries(e){fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(e=>e.json()).then(function(e){searchResponseEl.innerHTML="";const t=document.createElement("h2"),s=document.createTextNode("Resultados");t.appendChild(s);for(const t of e)printSeriesTitle(t.show)})}function searchButtonClickHandler(){searchSeries(search=searchInputEl.value)}searchButtonEl.addEventListener("click",searchButtonClickHandler);